# 图片合成与拆分工具

一个用于将多张图片合成一张长图，以及将长图拆分为多张原始图片的Python工具，支持保留原始图片的EXIF元数据。

## 功能特点

- **图片合成**：将多张图片垂直合成为一张长图，同时记录每张图片的原始信息
- **图片拆分**：将合成的长图拆分为原始图片，并还原原始图片的EXIF元数据
- **元数据保留**：支持JPEG格式的EXIF数据和PNG格式的文本元数据
- **多格式支持**：处理JPEG和PNG等常见图片格式
- **用户友好**：提供简单易用的界面

## 安装说明

### 直接使用编译好的可执行文件

1. 在项目的`dist`目录下找到`图片合成拆分.exe`文件
2. 直接双击运行即可使用

### 从源码运行

1. 确保已安装Python 3.7或更高版本
2. 安装必要的依赖：
   ```bash
   pip install pillow opencv-python numpy
   ```
3. 运行主程序：
   ```bash
   python mian.py
   ```

## 使用方法

### 图片合成

1. 启动程序后，点击"打开多张图片"按钮选择要合成的图片
2. 确认图片顺序后，点击"合成图片"按钮
3. 选择保存位置和文件名，完成合成

### 图片拆分

1. 启动程序后，点击"打开合成图片"按钮选择要拆分的长图
2. 程序会自动识别并拆分为原始图片
3. 选择保存路径，完成拆分

## 注意事项

- 合成图片时，会自动生成`record.json`文件，记录每张原始图片的信息，请与合成图片保存在同一位置
- 拆分图片时，请确保`record.json`文件与合成图片在同一目录下，否则无法正确还原原始图片的元数据
- 对于JPEG图片，程序会保留相机信息、拍摄日期、曝光参数等EXIF数据
- 对于PNG图片，程序会将关键元数据存储在PNG的TEXT chunks中

## 开发说明

如果您想进行二次开发或修改功能：

1. 修改`mian.py`文件中的相关代码
2. 使用PyInstaller重新编译：
   ```bash
   pyinstaller mian.spec
   ```

## 常见问题

### 拆分后图片没有还原原始元数据

- 请确认`record.json`文件与合成图片在同一目录下
- 检查原始图片是否包含EXIF数据（部分图片可能没有元数据）

### 程序无法正常启动

- 尝试以管理员身份运行
- 确保电脑上已安装必要的运行库

## 更新日志

- 支持JPEG和PNG格式的元数据保留
- 优化了图片合成和拆分的效率
- 修复了元数据还原的相关bug